<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Modal default</title>
    <link href="https://fonts.googleapis.com/css?family=Exo+2" rel="stylesheet">
    <style>
    body {
  margin: 0;
  background-color:#556;
  background-image: linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
  linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
  linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
  linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
  linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a), 
  linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a);
  background-size:80px 140px;
  background-position: 0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px;
  font-family: "Exo 2", sans-serif;
  box-sizing: border-box;
}

*, *:before, *:after {
  box-sizing: inherit;
}

.container {
  margin: 20px;
  padding: 20px;
  min-height: 600px;
  font-size: 16px;
  background-color: #fff;
}

.container .btn {
  text-align: center;
  margin-top: 50px;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 50;
  background: rgba(0, 0, 0, 0.6);
}

.modal-open {
  color: #fff;
  border: 1px #007bff solid;
  border-radius: 5px;
  padding: 8px 12px;
  font-size: 16px;
  font-family: 'Exo 2', sans-serif;
  background-color: #007bff;
  text-decoration: none;
}

.modal-open:hover {
  text-decoration: none;
  background-color: #0069d9;
  border-color: #0062cc;
}

.modal-open:active {
  text-decoration: none;
  background-color: #0062cc;
  border-color: #005cbf;
}

.modal {
  display: block;
  width: 600px;
  max-width: 100%;
  height: 400px;
  max-height: 100%;
  position: fixed;
  z-index: 100;
  left: 50%;
  top: 50%;
  border-radius: 10px;
  transform: translate(-50%, -50%);
  background: white;
  box-shadow: 0 0 60px 10px rgba(0, 0, 0, 0.9);
}

.modal_closed {
  display: none;
}

.modal__header {
  border-bottom: 1px gray solid;
  padding: 10px 15px;
  margin-bottom: 15px;
}
.modal__close {
  position: absolute;
  top: 15px;
  right: 15px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAEFCu8CAAAABGdBTUEAALGPC/xhBQAAAqpJREFUSA2tljtyFEEMhsdgHJpb2NyAxwkgcQHGHGE3Bs4B8RICV6G4ARSERH4QGaog4vF/qv7HWu3MzrqMqjR69C9puls9PV13QU9Rr13Y3Vfpf7GPxLdRROGw0hs43vHYFuM9wYAMOcbYaQ47u7fJgRMGFMkwIgyHyIDesNMgAD3dkvZDvGWPlSVUG4wxBu43h0HIGT4UO7Hv2EeoB1wCQPhYzi/i12JHSA26acWpLV96IMtDGQZU+TEDrT9qAb8lD8RnzXbwC9mL5vsjGbSvpwGnzWfB+5s8F7C/cLLSDrS8y0Ci+gbguutiBzxLYCoQkMm4D0NOD47JwVUl0Vz8U5wD38veFa8ldptDw9xpfhZvkj4JkStlnT1eoXxmMrjqHKUlYlMBsclsdg5gZWkKmgP/Q3EQi2Fgc/WNe2yH5IOKowscWDslxXV0lXF7DNiwzMEOpLLHkTHX7ECv3XKvBIH5Ll7KlOfEmIm3yAWeMEDf2Ylt+iYlv/Zz2cbR39FKdmBDeU4O5jMB7jMA0yspDp6SjunlJsE3enRROAGchFyVkzIruEmTT91cTLJ61GpyMGApfinioGwy3VxwSCcHudbS/yhUi5NzhXbl4QbJ4EVB0T65nYzF59ZyiFvMGFqNGkE0a25yg/KHuUFDkJxjB9dCAdAjHwbno0YcDP4s7KySt/dfh9RJ4gWGVsF54wgP3VMGWDKbenfl6nxYwBg/JuNjw8UwBsA/tEdyr9DU7MgVn8V9Kflj7OL8kY0tJ8nH9g9//mg7HzX2xEFzPT1g6V+pBglRZzE2+3y9ON8sJ0LnD8eXHCAus4X4QMyFt26PGAMDliPhi5A85OwvROlLtCOLdfZbXVWSi5wb0WOh+Nm7bFFiiL0S8btDc/HL80Z83hgdH2NgJukfa8ehuEonW4wAAAAASUVORK5CYII=');
  overflow: hidden;
  text-indent: -999em;
  text-decoration: none;
}

.modal__close:hover {
  background-color: #dc3545;
  text-decoration: none;
}

.modal__content {
  padding: 10px 15px;
  min-height: 200px;
}

.form-field {
  padding: 0 0 10px;
}

.form-field label {}

.form-field input {
  border: 1px gray solid;
  border-radius: 5px;
  padding: 8px 12px;
  margin: 0 10px;
  font-size: 14px;
  font-family: "Exo 2", sans-serif;
}

.form-field .input__default {
  width: 380px;
}

.form-field .input__date-birth {
  width: 100px;
  text-align: center;
}

.modal__footer {
  border-top: 1px gray solid;
  padding: 15px;
  margin-top: 15px;
  text-align: right;
}

.modal__footer button {
  border: 1px gray solid;
  border-radius: 5px;
  padding: 8px 12px;
  margin: 0 10px;
  font-size: 14px;
  font-family: "Exo 2", sans-serif;
}

.modal__footer .modal__cancel {
  background-color: #dc3545;
  border-color: #dc3545;
  color: #fff;
}

.modal__footer .modal__cancel:hover {
  background-color: #c82333;
  border-color: #bd2130;
}

.modal__footer .modal__cancel:active {
  background-color: #bd2130;
  border-color: #b21f2d;
}

.modal__footer .modal__save {
  background-color: #28a745;
  border-color: #28a745;
  color: #fff;
}

.modal__footer .modal__save:hover {
  background-color: #218838;
  border-color: #1e7e34;
}

.modal__footer .modal__save:active {
  background-color: #1e7e34;
  border-color: #1c7430;
}

.modal__footer .modal__save:disabled {
  opacity: 0.7;
  background-color: #28a745;
  border-color: #28a745;
  color: #fff;
  cursor: not-allowed;
}
    </style>
</head>
<body>

  <div class="container">
    <h1>Создание простейшего модального окошка!</h1>

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
    <p class="btn"><a href="#" id="modal-open" class="modal-open" title="Покажите мне модальное окошко">Открыть окно</a></p>
    <div class="modal_closed" id="sayHiWrapper">
      <h3 id="sayHiName"></h3>
      <p id="sayHiBirthday"></p>
      <p><a href="#" title="Очистить данные" id="clear-data">Очистить данные</a></p>
    </div>
  </div>

<div class="modal-overlay modal_closed" id="modal-overlay"></div>
<div class="modal modal_closed" id="modal">
    <header class="modal__header">
        <a href="#" class="modal__close" id="modal-close" title="Закрыть модальное окно">Закрыть</a>
        <h2>Введите данные</h2>
    </header>

    <main class="modal__content">
        <div class="form-field">
            <label for="name">Ваше имя:</label>
            <input class="input__default" type="text" id="name" name="name">
        </div>
        <div class="form-field">
            <label>Ваш день рождения:</label>
            <input type="text" class="input__date-birth" id="birth-day" name="name" placeholder="День" maxlength="2"> -
            <input type="text" class="input__date-birth" id="birth-month" name="name" placeholder="Месяц" maxlength="2"> -
            <input type="text" class="input__date-birth" id="birth-year" name="name" placeholder="Год" maxlength="4">
        </div>
    </main>

    <footer class="modal__footer">
        <button id="modal-cancel" class="modal__cancel" title="Отмена">Отмена</button>
        <button id="modal-save" class="modal__save" title="Сохранить">Сохранить данные</button>
    </footer>
</div>
<script>
    const modal = document.getElementById("modal");
    const modalOverlay = document.getElementById("modal-overlay");
    const closeButton = document.getElementById("modal-close");
    const cancelButton = document.getElementById("modal-cancel");
    const saveButton = document.getElementById("modal-save");
   
    const modalInputName = document.querySelector("#name");
    const modalInputDay = document.querySelector("#birth-day");
    const modalInputMonth = document.querySelector("#birth-month");
    const modalInputYear = document.querySelector("#birth-year");
    const sayHi = document.getElementById("sayHiWrapper");
    const sayHiNaming = document.getElementById("sayHiName");
    const sayHiBirth= document.getElementById("sayHiBirthday");
    const clearDataButton = document.getElementById("clear-data");
    
    closeButton.addEventListener("click", toggling);
    cancelButton.addEventListener("click", toggling);
   
    saveButton.addEventListener("click", saving);
    modalInputName.addEventListener("input", disabling);
    modalInputDay.addEventListener("input", disabling);
    modalInputMonth.addEventListener("input", disabling);
    modalInputYear.addEventListener("input", disabling);
    clearDataButton.addEventListener("click", ModalController.clearData);

    function toggling(event) {
      event.preventDefault();
      modal.classList.toggle("modal_closed");
      modalOverlay.classList.toggle("modal_closed");
      clearing();
    }
    saveButton.disabled = true; 
    
    function disabling(){
      if (
        modalInputName.value && 
        modalInputDay.value &&
        modalInputMonth.value &&
        modalInputYear.value
        ){
          if (
          (modalInputDay.value > 0 && 
          modalInputDay.value < 32) && 
          (modalInputMonth.value > 0 &&
          modalInputMonth.value < 13) &&
          (modalInputYear.value > 1900 &&
          modalInputYear.value < 2023)
          ){
            saveButton.disabled = false;  
          } else {
            saveButton.disabled = true;   
          }                    
      } else {
          saveButton.disabled = true; 
      }
    }

 function clearing() {
      modalInputName.value = "";
      modalInputDay.value = "";
      modalInputMonth.value = "";
      modalInputYear.value = "";
    }

    function saving(event) {
      event.preventDefault();

      if (typeof localStorage !== "undefined") {
        const userData = {
          inputName: modalInputName.value,
          inputDay: modalInputDay.value,
          inputMonth: modalInputMonth.value,
          inputYear: modalInputYear.value
        }
        localStorage.setItem("userData", JSON.stringify(userData));
        sayHi.classList.remove("modal_closed");
        showInfo();
      } else {
        console.log("localStorage is not defined and you can try to use cookies");
      }

      toggling(event);
    }

    if (localStorage.getItem("userData")) {
        sayHi.classList.remove("modal_closed");
        showInfo();
    }
   
    function showInfo() {
      const parsedUser = JSON.parse(window.localStorage.getItem("userData"));
      sayHiNaming.textContent = `Привет, ${parsedUser.inputName}!!!`;
      sayHiBirth.textContent = `У тебя день рождения ${parsedUser.inputDay}/${parsedUser.inputMonth}/${parsedUser.inputYear}.`;
    }

   




/* ------- begin view -------- */
function ModalView() {
    let myModal = null;
    let myModalOverlay = null;

    this.init = function() {
    }

    this.show = function () {
    }

    this.hide = function () {
    }

    this.printViewData = function () { // вывести данные из хранилища в div.modal-data
    }

    this.clearViewData = function () { // очистить или выдать дефолтное сообщение только для div.modal-data
    }

  };
/* -------- end view --------- */

/* ------- begin model ------- */
  function ModalModel () {
    let myModalContainer = null;
    let myModalView = null;
    let buttonDisabled = null;
    let userData = {};

    this.init = function() {
  
    }

    this.openModal = function() {
    }

    this.closeModal = function() {
    }

    this.saveModalData = function() { //получить данные из модалки и сохранить
    }

    this.storeData = function() { // сохранить данные в localStorage, а если не доступно, то в cookies
    }

    this.getData = function() { //достать данные из хранилища
    }

    this.updateData = function() {
    }

    this.clearData = function() { //очистить данные в хранилище
    }

    this.clearForm = function() { //очистить данные в форме
    }

  }
/* -------- end model -------- */




/* ----- begin controller ---- */
  function ModalController () {
    let myModalContainer = null;
    let myModalModel = null;

    this.init = function() {  
    
    }

    this.toggling = function () {
        event.preventDefault();
        // modal.classList.toggle("modal_closed");
        // modalOverlay.classList.toggle("modal_closed");             view !!!!!!!!!!!!
        clearing();
    }
    this.openModal = function () {
      const modal = document.getElementById("modal");
      const modalOverlay = document.getElementById("modal-overlay");
      const openButton = document.getElementById("modal-open");
      
      openButton.addEventListener('click', toggling);
    }

    this.hideModal = function (){
      const modal = document.getElementById("modal");
      const modalOverlay = document.getElementById("modal-overlay");
      const closeButton = document.getElementById("modal-close");
      const cancelButton = document.getElementById("modal-cancel");

      closeButton.addEventListener("click", toggling);
      cancelButton.addEventListener("click", toggling);
    },

    this.saveModal = function () {
      const saveButton = document.getElementById("modal-save");
      const modalInputName = document.querySelector("#name");
      const modalInputDay = document.querySelector("#birth-day");
      const modalInputMonth = document.querySelector("#birth-month");
      const modalInputYear = document.querySelector("#birth-year");

      modalInputName.addEventListener("input", disabling);
      modalInputDay.addEventListener("input", disabling);
      modalInputMonth.addEventListener("input", disabling);
      modalInputYear.addEventListener("input", disabling);

      function disabling(){
        if (
          modalInputName.value && 
          modalInputDay.value &&
          modalInputMonth.value &&
          modalInputYear.value
          ){
            if (
            (modalInputDay.value > 0 && 
            modalInputDay.value < 32) && 
            (modalInputMonth.value > 0 &&
            modalInputMonth.value < 13) &&
            (modalInputYear.value > 1900 &&
            modalInputYear.value < 2023)
            ){
              model.
              saveButton.disabled = false;  
            } else {
              saveButton.disabled = true;   
            }                    
        } else {
            saveButton.disabled = true; 
        }
      }
    }

    this.clearData = function () {
      const clearDataButton = document.getElementById("clear-data");  

      clearDataButton.addEventListener("click", clearData);

      function clearData() {
      localStorage.removeItem("userData");   
      sayHiNaming.textContent = "";
      sayHiBirth.textContent = `Данные отсутствуют...`;
      clearDataButton.textContent = "";
    }
    }
  };
/* ------ end controller ----- */



// глобальная инициализация
  const appModalView = new ModalView();
  const appModalModel = new ModalModel();
  const appModalController = new ModalController();
</script>
</body>
</html>